trigger OpportunityTrigger on Opportunity (after update){

    // trigger code to update closed date field if stage field is modified
    List<Opportunity> modifiedOpps = new List<Opportunity>();
    String closedWonString = 'Closed Won';
    String ClosedLostString = 'Closed Lost';
    for(opportunity op : [SELECT Id , stageName , CloseDate FROM Opportunity WHERE Id IN :Trigger.New AND (StageName = ClosedWonString OR           StageName = ClosedLostString)]){
        if(Trigger.oldMap.get(op.Id).StageName != op.StageName){
            opp.CloseDate = System.today();
            modifiedOpps.add(opp);
        }
    }
    if(modifiedOpps.size() > 0){
        UPDATE modifiedOpps;
    }
  }
}
