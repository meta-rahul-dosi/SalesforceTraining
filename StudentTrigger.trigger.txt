trigger StudentTrigger on Student__c (before insert, after insert){
    
    // trigger code to restrict student insertion into a class if that class maximum capacity is reached.
    if(trigger.isBefore){
        List<Student__c> studentsToBeInserted = new List<Student__c>(); 
        for(Class__c cls : [SELECT MaxSize__c, NumberOfStudents__c FROM Class__c WHERE Id =: trigger.new.Class__c]){
            if(cls.NumberOfStudents__c < cls.MaxSize__c){
                studentsToBeInserted.add(everyStudent);
            }
        }
        if(studentsToBeInserted.size() > 0){
            INSERT studentsToBeInserted;
        }
    }
    
    //trigger code to update MyCount field of Class object according to new student insertion
    if(trigger.isAfter && trigger.isInsert){
        List<Class__c> classListToBeUpdated = new List<Class__c>();
        for(Class__c cls : [SELECT MyCount__c FROM Class__c WHERE Id=:trigger.new.Class__c]){
                cls.MyCount++;
                classListToBeUpdated.add(cls);
        }
        if(listToBeUpdated > 0){
            UPDATE classListToBeUpdated;
        }
    }
}
